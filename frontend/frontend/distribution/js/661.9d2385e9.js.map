{"version":3,"file":"js/661.9d2385e9.js","mappings":"8KAEA,MAAMA,EAAiBA,KAGrB,GAFAC,QAAQC,IAAI,yBAERC,KAAwD,cAAzCC,aAAaC,QAAQ,gBAwBtC,OAAOD,aAAaC,QAAQ,gBAxB2C,CAGvE,GAFAJ,QAAQC,IAAI,qBAGgC,OAA1CE,aAAaC,QAAQ,kBACqB,cAA1CD,aAAaC,QAAQ,iBAGrB,YADAD,aAAaE,QAGf,MAAMC,EAAgBH,aAAaC,QAAQ,kBAC3CG,EAAAA,EAAAA,GAAM,CACJC,OAAQ,MACRC,IAAM,GAAEC,CAAAA,SAAAA,aAAAA,SAAAA,KAAYC,mBACpBC,QAAS,CACPN,cAAeA,KAEhBO,MAAMC,IACPd,QAAQC,IAAIa,EAAIC,MAChBZ,aAAaa,QAAQ,eAAgBF,EAAIC,KAAKE,cAC9Cd,aAAaa,QAAQ,gBAAiBF,EAAIC,KAAKT,eAC/CH,aAAaa,QAAQ,aAAcF,EAAIC,KAAKG,WAAW,GAE3D,CAEA,EAGIhB,EAAYA,KAChBF,QAAQC,IAAIkB,KAAKC,MAAQ,KACzBpB,QAAQC,IAAIE,aAAaC,QAAQ,eAC1Be,KAAKC,MAAQ,IAAOjB,aAAaC,QAAQ,cAAgB,IAGrDiB,EAActB,G","sources":["webpack://frontend/./src/utils.js"],"sourcesContent":["import axios from \"axios\";\n\nconst getAccessToken = () => {\n  console.log(\"Getting access token\");\n  // If token is expired hit \"/refresh endpoint\"\n  if (isExpired() || localStorage.getItem(\"access_token\") === \"undefined\") {\n    console.log(\"Use refresh token\");\n    // If there is no refresh token available\n    if (\n      localStorage.getItem(\"refresh_token\") === null ||\n      localStorage.getItem(\"refresh_token\") === \"undefined\"\n    ) {\n      localStorage.clear();\n      return;\n    }\n    const refresh_token = localStorage.getItem(\"refresh_token\");\n    axios({\n      method: \"get\",\n      url: `${process.env.URL_BASE}/refresh`,\n      headers: {\n        refresh_token: refresh_token,\n      },\n    }).then((res) => {\n      console.log(res.data);\n      localStorage.setItem(\"access_token\", res.data.access_token);\n      localStorage.setItem(\"refresh_token\", res.data.refresh_token);\n      localStorage.setItem(\"expires_at\", res.data.expires_at);\n    });\n  } else {\n    return localStorage.getItem(\"access_token\");\n  }\n};\n\nconst isExpired = () => {\n  console.log(Date.now() / 1000);\n  console.log(localStorage.getItem(\"expires_at\"));\n  return Date.now() / 1000 > localStorage.getItem(\"expires_at\") - 60;\n};\n\nexport const accessToken = getAccessToken();\n"],"names":["getAccessToken","console","log","isExpired","localStorage","getItem","clear","refresh_token","axios","method","url","process","URL_BASE","headers","then","res","data","setItem","access_token","expires_at","Date","now","accessToken"],"sourceRoot":""}